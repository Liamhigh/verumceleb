import fs from 'fs';
import path from 'path';
import { makeSealedPdf } from './pdf/seal-template.js';

async function run() {
    const pdf = await makeSealedPdf({ hash: 'testhash123', title: 'Test Seal', notes: 'Generated by test', logoPath: path.join(path.dirname(new URL(import.meta.url).pathname), '..', 'web', 'assets', 'logo_black.png') });
    const out = fs.createWriteStream('./tmp-test-seal.pdf');
    pdf.pipe(out);
    out.on('finish', () => { console.log('PDF written to ./tmp-test-seal.pdf'); process.exit(0); });
    out.on('error', (e) => { console.error('write error', e); process.exit(1); });
}

run().catch(e => { console.error(e); process.exit(1); });
